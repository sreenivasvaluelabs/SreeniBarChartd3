{"ast":null,"code":"import * as d3 from 'd3';\nconst MARGIN = {\n  TOP: 10,\n  BOTTOM: 50,\n  LEFT: 70,\n  RIGHT: 10\n};\nconst WIDTH = 800 - MARGIN.LEFT - MARGIN.RIGHT;\nconst HEIGHT = 500 - MARGIN.TOP - MARGIN.BOTTOM;\nexport default class D3Chart {\n  constructor(element) {\n    const vis = this;\n    vis.svg = d3.select(element).append(\"svg\").attr(\"width\", WIDTH + MARGIN.LEFT + MARGIN.RIGHT).attr(\"height\", HEIGHT + MARGIN.TOP + MARGIN.BOTTOM).append(\"g\").attr(\"transform\", \"translate(\".concat(MARGIN.LEFT, \", \").concat(MARGIN.TOP, \")\"));\n    vis.xLabel = vis.svg.append(\"text\").attr(\"x\", WIDTH / 2).attr(\"y\", HEIGHT + 50).attr(\"text-anchor\", \"middle\");\n    vis.svg.append(\"text\").attr(\"x\", -(HEIGHT / 2)).attr(\"y\", -50).attr(\"text-anchor\", \"middle\").text(\"Height in cm\").attr(\"transform\", \"rotate(-90)\");\n    vis.xAxisGroup = vis.svg.append(\"g\").attr(\"transform\", \"translate(0, \".concat(HEIGHT, \")\"));\n    vis.yAxisGroup = vis.svg.append(\"g\");\n    Promise.all([d3.json(\"https://udemy-react-d3.firebaseio.com/tallest_men.json\"), d3.json(\"https://udemy-react-d3.firebaseio.com/tallest_women.json\")]).then(datasets => {\n      vis.menData = datasets[0];\n      vis.womenData = datasets[1];\n      vis.update(\"men\");\n    });\n  }\n\n  update(gender) {\n    const vis = this;\n    vis.data = gender === \"men\" ? vis.menData : vis.womenData;\n    vis.xLabel.text(\"The world's tallest \".concat(gender));\n    const y = d3.scaleLinear().domain([d3.min(vis.data, d => d.height) * 0.95, d3.max(vis.data, d => d.height)]).range([HEIGHT, 0]);\n    const x = d3.scaleBand().domain(vis.data.map(d => d.name)).range([0, WIDTH]).padding(0.4);\n    const xAxisCall = d3.axisBottom(x);\n    vis.xAxisGroup.transition().duration(500).call(xAxisCall);\n    const yAxisCall = d3.axisLeft(y);\n    vis.yAxisGroup.transition().duration(500).call(yAxisCall); // DATA JOIN\n\n    const rects = vis.svg.selectAll(\"rect\").data(vis.data); // EXIT\n\n    rects.exit().transition().duration(500).attr(\"height\", 0).attr(\"y\", HEIGHT).remove(); // UPDATE\n\n    rects.transition().duration(500).attr(\"x\", d => x(d.name)).attr(\"y\", d => y(d.height)).attr(\"width\", x.bandwidth).attr(\"height\", d => HEIGHT - y(d.height)); // ENTER\n\n    rects.enter().append(\"rect\").attr(\"x\", d => x(d.name)).attr(\"width\", x.bandwidth).attr(\"fill\", \"grey\").attr(\"y\", HEIGHT).transition().duration(500).attr(\"height\", d => HEIGHT - y(d.height)).attr(\"y\", d => y(d.height));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/HP/Downloads/SREENID3/SreeniBarChartd3/src/D3Chart.js"],"names":["d3","MARGIN","TOP","BOTTOM","LEFT","RIGHT","WIDTH","HEIGHT","D3Chart","constructor","element","vis","svg","select","append","attr","xLabel","text","xAxisGroup","yAxisGroup","Promise","all","json","then","datasets","menData","womenData","update","gender","data","y","scaleLinear","domain","min","d","height","max","range","x","scaleBand","map","name","padding","xAxisCall","axisBottom","transition","duration","call","yAxisCall","axisLeft","rects","selectAll","exit","remove","bandwidth","enter"],"mappings":"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","sourcesContent":["import * as d3 from 'd3'\n\nconst MARGIN = { TOP: 10, BOTTOM: 50, LEFT: 70, RIGHT: 10 }\nconst WIDTH = 800 - MARGIN.LEFT - MARGIN.RIGHT;\nconst HEIGHT = 500 - MARGIN.TOP - MARGIN.BOTTOM;\n\nexport default class D3Chart {\n\tconstructor(element) {\n\t\tconst vis = this\n\n\t\tvis.svg = d3.select(element)\n\t\t\t.append(\"svg\")\n\t\t\t\t.attr(\"width\", WIDTH + MARGIN.LEFT + MARGIN.RIGHT)\n\t\t\t\t.attr(\"height\", HEIGHT + MARGIN.TOP + MARGIN.BOTTOM)\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"transform\", `translate(${MARGIN.LEFT}, ${MARGIN.TOP})`)\n\n\t\tvis.xLabel = vis.svg.append(\"text\")\n\t\t\t.attr(\"x\", WIDTH / 2)\n\t\t\t.attr(\"y\", HEIGHT + 50)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\n\t\tvis.svg.append(\"text\")\n\t\t\t.attr(\"x\", -(HEIGHT / 2))\n\t\t\t.attr(\"y\", -50)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.text(\"Height in cm\")\n\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\n\t\tvis.xAxisGroup = vis.svg.append(\"g\")\n\t\t\t.attr(\"transform\", `translate(0, ${HEIGHT})`)\n\n\t\tvis.yAxisGroup = vis.svg.append(\"g\")\n\n\t\tPromise.all([\n\t\t\td3.json(\"https://udemy-react-d3.firebaseio.com/tallest_men.json\"),\n\t\t\td3.json(\"https://udemy-react-d3.firebaseio.com/tallest_women.json\")\n\t\t]).then((datasets) => {\n\t\t\tvis.menData = datasets[0]\n\t\t\tvis.womenData = datasets[1]\n\t\t\tvis.update(\"men\")\n\t\t})\n\t}\n\n\tupdate(gender) {\n\t\tconst vis = this\n\n\t\tvis.data = (gender === \"men\") ? vis.menData : vis.womenData;\n\t\tvis.xLabel.text(`The world's tallest ${gender}`)\n\n\t\tconst y = d3.scaleLinear()\n\t\t\t.domain([\n\t\t\t\td3.min(vis.data, d => d.height) * 0.95, \n\t\t\t\td3.max(vis.data, d =>  d.height)\n\t\t\t])\n\t\t\t.range([HEIGHT, 0])\n\n\t\tconst x = d3.scaleBand()\n\t\t\t.domain(vis.data.map(d => d.name))\n\t\t\t.range([0, WIDTH])\n\t\t\t.padding(0.4)\n\n\t\tconst xAxisCall = d3.axisBottom(x)\n\t\tvis.xAxisGroup.transition().duration(500).call(xAxisCall)\n\n\t\tconst yAxisCall = d3.axisLeft(y)\n\t\tvis.yAxisGroup.transition().duration(500).call(yAxisCall)\n\n\t\t// DATA JOIN\n\t\tconst rects = vis.svg.selectAll(\"rect\")\n\t\t\t.data(vis.data)\n\n\t\t// EXIT\n\t\trects.exit()\n\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"height\", 0)\n\t\t\t\t.attr(\"y\", HEIGHT)\n\t\t\t\t.remove()\n\n\t\t// UPDATE\n\t\trects.transition().duration(500)\n\t\t\t.attr(\"x\", d => x(d.name))\n\t\t\t.attr(\"y\", d => y(d.height))\n\t\t\t.attr(\"width\", x.bandwidth)\n\t\t\t.attr(\"height\", d => HEIGHT - y(d.height))\n\n\t\t// ENTER\n\t\trects.enter().append(\"rect\")\n\t\t\t.attr(\"x\", d => x(d.name))\n\t\t\t.attr(\"width\", x.bandwidth)\n\t\t\t.attr(\"fill\", \"grey\")\n\t\t\t.attr(\"y\", HEIGHT)\n\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"height\", d => HEIGHT - y(d.height))\n\t\t\t\t.attr(\"y\", d => y(d.height))\n\t}\n}"]},"metadata":{},"sourceType":"module"}