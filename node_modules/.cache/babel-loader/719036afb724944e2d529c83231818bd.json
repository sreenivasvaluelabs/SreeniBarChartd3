{"ast":null,"code":"import*as d3 from'd3';const MARGIN={TOP:10,BOTTOM:50,LEFT:70,RIGHT:10};const WIDTH=800-MARGIN.LEFT-MARGIN.RIGHT;const HEIGHT=500-MARGIN.TOP-MARGIN.BOTTOM;export default class D3Chart{constructor(element){const vis=this;vis.svg=d3.select(element).append(\"svg\").attr(\"width\",WIDTH+MARGIN.LEFT+MARGIN.RIGHT).attr(\"height\",HEIGHT+MARGIN.TOP+MARGIN.BOTTOM).append(\"g\").attr(\"transform\",\"translate(\".concat(MARGIN.LEFT,\", \").concat(MARGIN.TOP,\")\"));vis.xLabel=vis.svg.append(\"text\").attr(\"x\",WIDTH/2).attr(\"y\",HEIGHT+50).attr(\"text-anchor\",\"middle\");vis.svg.append(\"text\").attr(\"x\",-(HEIGHT/2)).attr(\"y\",-50).attr(\"text-anchor\",\"middle\").text(\"Height in cm\").attr(\"transform\",\"rotate(-90)\");vis.xAxisGroup=vis.svg.append(\"g\").attr(\"transform\",\"translate(0, \".concat(HEIGHT,\")\"));vis.yAxisGroup=vis.svg.append(\"g\");Promise.all([d3.json(\"https://udemy-react-d3.firebaseio.com/tallest_men.json\"),d3.json(\"https://udemy-react-d3.firebaseio.com/tallest_women.json\")]).then(datasets=>{vis.menData=datasets[0];vis.womenData=datasets[1];vis.update(\"men\");});}update(gender){const vis=this;vis.data=gender===\"men\"?vis.menData:vis.womenData;vis.xLabel.text(\"The world's tallest \".concat(gender));const y=d3.scaleLinear().domain([d3.min(vis.data,d=>d.height)*0.95,d3.max(vis.data,d=>d.height)]).range([HEIGHT,0]);const x=d3.scaleBand().domain(vis.data.map(d=>d.name)).range([0,WIDTH]).padding(0.4);const xAxisCall=d3.axisBottom(x);vis.xAxisGroup.transition().duration(500).call(xAxisCall);const yAxisCall=d3.axisLeft(y);vis.yAxisGroup.transition().duration(500).call(yAxisCall);// DATA JOIN\nconst rects=vis.svg.selectAll(\"rect\").data(vis.data);// EXIT\nrects.exit().transition().duration(500).attr(\"height\",0).attr(\"y\",HEIGHT).remove();// UPDATE\nrects.transition().duration(500).attr(\"x\",d=>x(d.name)).attr(\"y\",d=>y(d.height)).attr(\"width\",x.bandwidth).attr(\"height\",d=>HEIGHT-y(d.height));// ENTER\nrects.enter().append(\"rect\").attr(\"x\",d=>x(d.name)).attr(\"width\",x.bandwidth).attr(\"fill\",\"grey\").attr(\"y\",HEIGHT).transition().duration(500).attr(\"height\",d=>HEIGHT-y(d.height)).attr(\"y\",d=>y(d.height));}}","map":{"version":3,"sources":["C:/Users/HP/Downloads/SREENID3/SreeniBarChartd3/src/D3Chart.js"],"names":["d3","MARGIN","TOP","BOTTOM","LEFT","RIGHT","WIDTH","HEIGHT","D3Chart","constructor","element","vis","svg","select","append","attr","xLabel","text","xAxisGroup","yAxisGroup","Promise","all","json","then","datasets","menData","womenData","update","gender","data","y","scaleLinear","domain","min","d","height","max","range","x","scaleBand","map","name","padding","xAxisCall","axisBottom","transition","duration","call","yAxisCall","axisLeft","rects","selectAll","exit","remove","bandwidth","enter"],"mappings":"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","sourcesContent":["import * as d3 from 'd3'\n\nconst MARGIN = { TOP: 10, BOTTOM: 50, LEFT: 70, RIGHT: 10 }\nconst WIDTH = 800 - MARGIN.LEFT - MARGIN.RIGHT;\nconst HEIGHT = 500 - MARGIN.TOP - MARGIN.BOTTOM;\n\nexport default class D3Chart {\n\tconstructor(element) {\n\t\tconst vis = this\n\n\t\tvis.svg = d3.select(element)\n\t\t\t.append(\"svg\")\n\t\t\t\t.attr(\"width\", WIDTH + MARGIN.LEFT + MARGIN.RIGHT)\n\t\t\t\t.attr(\"height\", HEIGHT + MARGIN.TOP + MARGIN.BOTTOM)\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"transform\", `translate(${MARGIN.LEFT}, ${MARGIN.TOP})`)\n\n\t\tvis.xLabel = vis.svg.append(\"text\")\n\t\t\t.attr(\"x\", WIDTH / 2)\n\t\t\t.attr(\"y\", HEIGHT + 50)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\n\t\tvis.svg.append(\"text\")\n\t\t\t.attr(\"x\", -(HEIGHT / 2))\n\t\t\t.attr(\"y\", -50)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.text(\"Height in cm\")\n\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\n\t\tvis.xAxisGroup = vis.svg.append(\"g\")\n\t\t\t.attr(\"transform\", `translate(0, ${HEIGHT})`)\n\n\t\tvis.yAxisGroup = vis.svg.append(\"g\")\n\n\t\tPromise.all([\n\t\t\td3.json(\"https://udemy-react-d3.firebaseio.com/tallest_men.json\"),\n\t\t\td3.json(\"https://udemy-react-d3.firebaseio.com/tallest_women.json\")\n\t\t]).then((datasets) => {\n\t\t\tvis.menData = datasets[0]\n\t\t\tvis.womenData = datasets[1]\n\t\t\tvis.update(\"men\")\n\t\t})\n\t}\n\n\tupdate(gender) {\n\t\tconst vis = this\n\n\t\tvis.data = (gender === \"men\") ? vis.menData : vis.womenData;\n\t\tvis.xLabel.text(`The world's tallest ${gender}`)\n\n\t\tconst y = d3.scaleLinear()\n\t\t\t.domain([\n\t\t\t\td3.min(vis.data, d => d.height) * 0.95, \n\t\t\t\td3.max(vis.data, d =>  d.height)\n\t\t\t])\n\t\t\t.range([HEIGHT, 0])\n\n\t\tconst x = d3.scaleBand()\n\t\t\t.domain(vis.data.map(d => d.name))\n\t\t\t.range([0, WIDTH])\n\t\t\t.padding(0.4)\n\n\t\tconst xAxisCall = d3.axisBottom(x)\n\t\tvis.xAxisGroup.transition().duration(500).call(xAxisCall)\n\n\t\tconst yAxisCall = d3.axisLeft(y)\n\t\tvis.yAxisGroup.transition().duration(500).call(yAxisCall)\n\n\t\t// DATA JOIN\n\t\tconst rects = vis.svg.selectAll(\"rect\")\n\t\t\t.data(vis.data)\n\n\t\t// EXIT\n\t\trects.exit()\n\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"height\", 0)\n\t\t\t\t.attr(\"y\", HEIGHT)\n\t\t\t\t.remove()\n\n\t\t// UPDATE\n\t\trects.transition().duration(500)\n\t\t\t.attr(\"x\", d => x(d.name))\n\t\t\t.attr(\"y\", d => y(d.height))\n\t\t\t.attr(\"width\", x.bandwidth)\n\t\t\t.attr(\"height\", d => HEIGHT - y(d.height))\n\n\t\t// ENTER\n\t\trects.enter().append(\"rect\")\n\t\t\t.attr(\"x\", d => x(d.name))\n\t\t\t.attr(\"width\", x.bandwidth)\n\t\t\t.attr(\"fill\", \"grey\")\n\t\t\t.attr(\"y\", HEIGHT)\n\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"height\", d => HEIGHT - y(d.height))\n\t\t\t\t.attr(\"y\", d => y(d.height))\n\t}\n}"]},"metadata":{},"sourceType":"module"}